<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>jigsaw with laravel-mix, tailwindcss, highlightjs and opensheetmusicdisplay</title>
        <link rel="apple-touch-icon" sizes="180x180" href="http://gunharth.io/jigsaw-mix-tailwind-osmd/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="http://gunharth.io/jigsaw-mix-tailwind-osmd/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="http://gunharth.io/jigsaw-mix-tailwind-osmd/favicon-16x16.png">
        <link rel="manifest" href="http://gunharth.io/jigsaw-mix-tailwind-osmd/manifest.json">
        <link rel="mask-icon" href="http://gunharth.io/jigsaw-mix-tailwind-osmd/safari-pinned-tab.svg" color="#5bbad5">
        <meta name="theme-color" content="#ffffff">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github-gist.min.css">
        <link rel="stylesheet" href="http://gunharth.io/jigsaw-mix-tailwind-osmd/css/main.css">
    </head>
    <body class="text-brand-dark">
        <div class="h-1 bg-brand-light"></div>
        <div class="max-w-lg mx-auto mt-12 px-4">
            <div class="border-t border-b py-2 px-1 mt-8 flex items-center justify-center text-base">
                <div></div>
                <div class="px-4 pt-1">
                    <a href="https://github.com/gunharth/jigsaw-mix-tailwind-osmd" rel="noopener noreferer" target="_blank" class="text-brand-light hover:text-brand mr-1"><i class="fab fa-github-square text-3xl"></i></a>
                </div>
            </div>
            <div class="py-12">
            <h1>A markdown blog post with highlight.js</h1>
<pre><code class="language-javascript">const argv = require('yargs').argv;
const command = require('node-cmd');
const mix = require('laravel-mix');
const OnBuild = require('on-build-webpack');
const Watch = require('webpack-watch');
const tailwindcss = require('tailwindcss');
const glob = require("glob-all");
const PurgecssPlugin = require("purgecss-webpack-plugin");

/**
 * Custom PurgeCSS Extractor
 * https://github.com/FullHuman/purgecss
 * https://github.com/FullHuman/purgecss-webpack-plugin
 */
class TailwindExtractor {
    static extract(content) {
        return content.match(/[A-z0-9-:\/]+/g);
    }
}

const env = argv.e || argv.env || 'local'
const plugins = [
    new OnBuild(() =&gt; {
        command.get('./vendor/bin/jigsaw build ' + env, (error, stdout, stderr) =&gt; {
            if (error) {
                console.log(stderr)
                process.exit(1)
            }
            console.log(stdout)
        })
    }),
    new Watch({
        paths: ['source/**/*.md', 'source/**/*.php'],
        options: { ignoreInitial: true }
    }),
    new PurgecssPlugin({

        // Specify the locations of any files you want to scan for class names.
        paths: glob.sync([
            path.join(__dirname, "source/*.blade.php"),
            path.join(__dirname, "source/_layouts/*.blade.php"),
            //path.join(__dirname, "source/_assets/js/**/*.vue")
        ]),
        extractors: [
            {
                extractor: TailwindExtractor,

                // Specify the file extensions to include when scanning for
                // class names.
                extensions: ["html", "js", "php", "vue"]
            }
        ]
    }),
]

mix.webpackConfig({ plugins })
mix.setPublicPath('source')

mix
    .js('source/_assets/js/app.js', 'source/js')
    .sass('source/_assets/sass/main.scss', 'source/css')
    .options({
        processCssUrls: false,
        postCss: [tailwindcss('./tailwind.js')],
    })
    .browserSync({
        // for localhost
        // port: 8000,
        // server: { baseDir: 'build_' + env },
        // proxy: null,
        // for valet
        proxy: 'http://jigsaw-mix-tailwind-osmd.test',
        files: [
            'build_' + env + '/**/*'
        ]
    })
if (mix.inProduction()) {
    mix.version();
}</code></pre>            </div>
        </div>

        <script defer src="//use.fontawesome.com/releases/v5.0.2/js/all.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script type="text/javascript" src="http://gunharth.io/jigsaw-mix-tailwind-osmd/js/app.js"></script>
    </body>
</html>
